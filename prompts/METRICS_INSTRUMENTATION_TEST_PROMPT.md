Plan unit tests for the previous change. 

The previous change added instrumentation based on the plan in prompts/METRICS_INSTRUMENTATION_PLAN.md. Come up with a plan to unit test this change, and write it to prompts/METRICS_INSTRUMENTATION_TEST_PLAN.md

The plan must contain:
1. An overview of how you plan on testing, including details on what needs to be mocked or stubbed out. 
2. A list of unit tests you plan on writing
